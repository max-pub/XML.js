window.XML={parse:(t,e="text/xml")=>(new DOMParser).parseFromString(t,e),stringify:t=>(new XMLSerializer).serializeToString(t),fetch:async t=>XML.parse(await fetch(t).then(t=>t.text())),transform:(t,e)=>{let r=new XSLTProcessor;r.importStylesheet("string"==typeof e?XML.parse(e):e);let i=r.transformToFragment("string"==typeof t?XML.parse(t):t,document);return"string"==typeof t?XML.stringify(i):i},minify:t=>XML.toString(t),prettify:t=>XML.toString(t,{prettify:!0}),highlight:t=>XML.toString(t,{prettify:!0,highlight:!0}),toString:(t,e,r=0)=>{e={prettify:!1,highlight:!1,inlineTags:["b","i","u","q"],...e},"string"==typeof t&&(t=XML.parse(t));let i=e.prettify?Array(r+1).fill("").join("\t"):"",n=e.prettify?"\n":"",o=e.highlight?"&lt;":"<",l=e.highlight?"&gt;":">",g=(t,r)=>e.highlight?"<"+(r?"/":"")+t+">":"";if(3==t.nodeType&&!t.textContent.trim())return"";if(3==t.nodeType)return i+t.textContent.trim()+n;if(!t.tagName)return XML.toString(t.firstChild,e);let a=i+g("control")+o+g("control",1)+g("tag")+t.tagName+g("tag",1),h=1==t.childNodes.length&&3==t.childNodes[0].nodeType&&!t.childNodes[0].textContent.trim().includes("\n"),s=h&&""==t.childNodes[0].textContent.trim();for(let e=0;e<t.attributes.length;e++)a+=` ${g("attribute")}${t.attributes[e].name}${g("attribute",1)}${g("control")}="${g("control",1)}${g("value")}${t.attributes[e].value}${g("value",1)}${g("control")}"${g("control",1)}`;if(0==t.childNodes.length||s)return a+g("control")+" /"+l+g("control",1)+n;a+=g("control")+l+g("control",1),h||(a+=n);for(let i=0;i<t.childNodes.length;i++)a+=h?t.childNodes[i].textContent.trim():XML.toString(t.childNodes[i],e,r+1);return a+(h?"":i)+g("control")+o+"/"+g("control",1)+g("tag")+t.tagName+g("tag",1)+g("control")+l+g("control",1)+n}};